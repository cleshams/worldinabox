/*
 *  Vide - v0.3.7
 *  Easy as hell jQuery plugin for video backgrounds.
 *  http://vodkabears.github.io/vide/
 *
 *  Made by Ilya Makarov
 *  Under MIT License
 */
!function(e,t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):e.jQuery)}(this,function(u){"use strict";function r(e){var t,o,i,r,n,s,a,p={};for(a=0,s=(n=e.replace(/\s*:\s*/g,":").replace(/\s*,\s*/g,",").split(",")).length;a<s&&(-1===(o=n[a]).search(/^(http|https|ftp):\/\//)&&-1!==o.search(":"));a++)t=o.indexOf(":"),i=o.substring(0,t),(r=o.substring(t+1))||(r=void 0),"string"==typeof r&&(r="true"===r||"false"!==r&&r),"string"==typeof r&&(r=isNaN(r)?r:+r),p[i]=r;return null==i&&null==r?e:p}function d(e){var t,o,i,r=(e=""+e).split(/\s+/),n="50%",s="50%";for(i=0,t=r.length;i<t;i++)"left"===(o=r[i])?n="0%":"right"===o?n="100%":"top"===o?s="0%":"bottom"===o?s="100%":"center"===o?0===i?n="50%":s="50%":0===i?n=o:s=o;return{x:n,y:s}}function l(e,t){var o=function(){t(this.src)};u('<img src="'+e+'.gif">').load(o),u('<img src="'+e+'.jpg">').load(o),u('<img src="'+e+'.jpeg">').load(o),u('<img src="'+e+'.png">').load(o)}function i(e,t,o){if(this.$element=u(e),"string"==typeof t&&(t=r(t)),o?"string"==typeof o&&(o=r(o)):o={},"string"==typeof t)t=t.replace(/\.\w*$/,"");else if("object"==typeof t)for(var i in t)t.hasOwnProperty(i)&&(t[i]=t[i].replace(/\.\w*$/,""));this.settings=u.extend({},n,o),this.path=t;try{this.init()}catch(e){if(e.message!==g)throw e}}var f="vide",n={volume:1,playbackRate:1,muted:!0,loop:!0,autoplay:!0,position:"50% 50%",posterType:"detect",resizing:!0},g="Not implemented";i.prototype.init=function(){var e,t,o=this,i=o.path,r=i,n="",s=o.$element,a=o.settings,p=d(a.position),c=a.posterType;t=o.$wrapper=u("<div>").css({position:"absolute","z-index":-1,top:0,left:0,bottom:0,right:0,overflow:"hidden","-webkit-background-size":"cover","-moz-background-size":"cover","-o-background-size":"cover","background-size":"cover","background-repeat":"no-repeat","background-position":p.x+" "+p.y}),"object"==typeof i&&(i.poster?r=i.poster:i.mp4?r=i.mp4:i.webm?r=i.webm:i.ogv&&(r=i.ogv)),"detect"===c?l(r,function(e){t.css("background-image","url("+e+")")}):"none"!==c&&t.css("background-image","url("+r+"."+c+")"),"static"===s.css("position")&&s.css("position","relative"),s.prepend(t),e=o.$video="object"==typeof i?(i.mp4&&(n+='<source src="'+i.mp4+'.mp4" type="video/mp4">'),i.webm&&(n+='<source src="'+i.webm+'.webm" type="video/webm">'),i.ogv&&(n+='<source src="'+i.ogv+'.ogv" type="video/ogg">'),u("<video>"+n+"</video>")):u('<video><source src="'+i+'.mp4" type="video/mp4"><source src="'+i+'.webm" type="video/webm"><source src="'+i+'.ogv" type="video/ogg"></video>');try{e.prop({autoplay:a.autoplay,loop:a.loop,volume:a.volume,muted:a.muted,defaultMuted:a.muted,playbackRate:a.playbackRate,defaultPlaybackRate:a.playbackRate})}catch(e){throw new Error(g)}e.css({margin:"auto",position:"absolute","z-index":-1,top:p.y,left:p.x,"-webkit-transform":"translate(-"+p.x+", -"+p.y+")","-ms-transform":"translate(-"+p.x+", -"+p.y+")","-moz-transform":"translate(-"+p.x+", -"+p.y+")",transform:"translate(-"+p.x+", -"+p.y+")",visibility:"hidden"}).one("canplaythrough."+f,function(){o.resize()}).one("playing."+f,function(){e.css("visibility","visible"),t.css("background-image","none")}),s.on("resize."+f,function(){a.resizing&&o.resize()}),t.append(e)},i.prototype.getVideoObject=function(){return this.$video[0]},i.prototype.resize=function(){if(this.$video){var e=this.$wrapper,t=this.$video,o=t[0],i=o.videoHeight,r=o.videoWidth,n=e.height(),s=e.width();n/i<s/r?t.css({width:s+2,height:"auto"}):t.css({width:"auto",height:n+2})}},i.prototype.destroy=function(){delete u[f].lookup[this.index],this.$video&&this.$video.off(f),this.$element.off(f).removeData(f),this.$wrapper.remove()},u[f]={lookup:[]},u.fn[f]=function(e,t){var o;return this.each(function(){(o=u.data(this,f))&&o.destroy(),(o=new i(this,e,t)).index=u[f].lookup.push(o)-1,u.data(this,f,o)}),this},u(document).ready(function(){var e=u(window);e.on("resize."+f,function(){for(var e,t=u[f].lookup.length,o=0;o<t;o++)(e=u[f].lookup[o])&&e.settings.resizing&&e.resize()}),e.on("unload."+f,function(){return!1}),u(document).find("[data-vide-bg]").each(function(e,t){var o=u(t),i=o.data(f+"-options"),r=o.data(f+"-bg");o[f](r,i)})})});